@import "tailwindcss";

@theme {
  --font-mono:
    "JetBrains Mono", ui-monospace, "Cascadia Code", "Source Code Pro", Menlo,
    Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}

/* Base layer - HTML element defaults */
@layer base {
  :root {
    /* Layout measurements for sticky positioning */
    /* Header is taller on mobile (61px), shorter on desktop (37px via media query below) */
    --header-height: 61px;
    --page-nav-height: 45px;
  }

  @media (min-width: 768px) {
    :root {
      --header-height: 37px;
    }
  }

  * {
    @apply border-slate-700;
  }

  html {
    font-family: var(--font-mono), monospace;
    font-feature-settings:
      "liga" 1,
      "calt" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    @apply text-slate-50;
    /* Slight teal tint to the dark background for CRT feel */
    background-color: #020a09;
    /* Subtle phosphor dot pattern */
    background-image: radial-gradient(
      circle at center,
      rgba(20, 184, 166, 0.03) 0%,
      transparent 1px
    );
    background-size: 3px 3px;
  }

  /* Offset anchor scroll positions to account for sticky headers */
  h1,
  h2,
  h3 {
    scroll-margin-top: calc(
      var(--header-height) + var(--page-nav-height) + 1rem
    );
  }

  :focus-visible {
    @apply outline-2 outline-offset-2 outline-teal-400;
  }

  /* Screen reader only utility */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  .focus\:not-sr-only:focus {
    position: static;
    width: auto;
    height: auto;
    padding: inherit;
    margin: inherit;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }
}

@layer components {
  /* Terminal window chrome */
  .terminal-window {
    @apply border border-slate-700 bg-slate-900/90;
    border-radius: 2px;
    box-shadow:
      0 0 0 1px rgba(148, 163, 184, 0.1),
      0 2px 8px rgba(0, 0, 0, 0.4);
  }

  .terminal-header {
    @apply border-b border-slate-700 bg-slate-800/50 px-4 py-2 font-mono text-sm;
  }

  .prose-h1-glow {
    text-shadow:
      0 0 20px rgba(20, 184, 166, 0.4),
      0 0 40px rgba(20, 184, 166, 0.2);
  }

  .prose-bracket-glow {
    text-shadow:
      0 0 10px rgba(20, 184, 166, 0.6),
      0 0 20px rgba(20, 184, 166, 0.3);
  }

  .prose-h2-glow {
    text-shadow:
      0 0 15px rgba(251, 191, 36, 0.3),
      0 0 30px rgba(251, 191, 36, 0.15);
  }

  .prose-h3-glow {
    text-shadow:
      0 0 12px rgba(192, 132, 252, 0.3),
      0 0 24px rgba(192, 132, 252, 0.15);
  }

  /* Reduce visual complexity for users who prefer reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .prose-h1-glow,
    .prose-h2-glow,
    .prose-h3-glow,
    .prose-bracket-glow {
      text-shadow: none;
    }
  }

  /* CRT effect - scanlines (respects prefers-reduced-motion) */
  .crt-scanlines {
    position: relative;
  }

  @media (prefers-reduced-motion: no-preference) {
    .crt-scanlines::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
      background:
        repeating-linear-gradient(
          0deg,
          rgba(0, 20, 18, 0.25) 0px,
          rgba(0, 20, 18, 0.25) 1px,
          transparent 1px,
          transparent 2px
        ),
        repeating-linear-gradient(
          0deg,
          transparent 0px,
          transparent 3px,
          rgba(20, 184, 166, 0.02) 3px,
          rgba(20, 184, 166, 0.02) 4px
        );
      animation: crt-flicker 8s infinite;
    }

    @keyframes crt-flicker {
      0%,
      100% {
        opacity: 1;
      }
      50% {
        opacity: 0.97;
      }
      52% {
        opacity: 1;
      }
      54% {
        opacity: 0.98;
      }
    }
  }

  .crt-glow {
    box-shadow:
      /* Inner teal phosphor glow */
      inset 0 0 60px rgba(20, 184, 166, 0.12),
      inset 0 0 120px rgba(20, 184, 166, 0.06),
      /* Vignette - darker corners */ inset 0 0 200px 80px rgba(0, 0, 0, 0.15);
  }

  .power-led {
    @apply inline-block h-2 w-2 rounded-full bg-teal-400;
    box-shadow:
      0 0 6px rgba(20, 184, 166, 0.9),
      0 0 12px rgba(20, 184, 166, 0.6),
      0 0 20px rgba(20, 184, 166, 0.3);
  }

  @media (prefers-reduced-motion: no-preference) {
    .power-led {
      animation: led-pulse 3s ease-in-out infinite;
    }

    @keyframes led-pulse {
      0%,
      100% {
        box-shadow:
          0 0 6px rgba(20, 184, 166, 0.9),
          0 0 12px rgba(20, 184, 166, 0.6),
          0 0 20px rgba(20, 184, 166, 0.3);
      }
      50% {
        box-shadow:
          0 0 8px rgba(20, 184, 166, 1),
          0 0 16px rgba(20, 184, 166, 0.7),
          0 0 28px rgba(20, 184, 166, 0.4);
      }
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .power-led {
      box-shadow: 0 0 4px rgba(20, 184, 166, 0.6);
    }
  }

  .ascii-divider {
    @apply my-6 flex items-center justify-center text-slate-600;
  }

  .ascii-divider::before {
    content: "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━";
    @apply font-mono text-xs;
  }

  /* Collapsible details/summary glow effects (works with CollapsibleSection component) */
  details summary:hover,
  details summary:focus-visible {
    text-shadow: 0 0 8px rgba(20, 184, 166, 0.3);
  }

  /* Thumb-friendly touch targets for mobile */
  @media (max-width: 768px) {
    summary,
    button,
    a {
      min-height: 44px;
      min-width: 44px;
    }
  }
}

@media print {
  @page {
    margin: 0.75in;
    size: letter portrait;
  }

  html {
    @apply bg-white text-slate-900;
  }

  body {
    @apply bg-white text-slate-900;
    background-image: none;
  }

  .prose-h1-glow,
  .prose-h2-glow,
  .prose-h3-glow,
  .prose-bracket-glow {
    text-shadow: none;
  }

  .crt-scanlines::before {
    display: none !important;
  }

  .crt-glow {
    box-shadow: none !important;
  }

  .power-led,
  .terminal-header,
  nav,
  button {
    display: none !important;
  }

  .terminal-window {
    border: none !important;
    background: none !important;
    box-shadow: none !important;
  }

  /* Hide URL display - link text already contains URLs in this resume */
  a[href]::after {
    content: none !important;
  }

  /* Restore standard list styling for print */
  ul {
    list-style-type: disc;
    padding-left: 1.5rem;
  }

  li {
    display: list-item;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  p,
  li {
    page-break-inside: avoid;
  }

  section,
  article {
    page-break-inside: avoid;
  }
}
